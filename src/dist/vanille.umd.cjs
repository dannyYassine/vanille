(function(o,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(o=typeof globalThis<"u"?globalThis:o||self,c(o.vanille={}))})(this,function(o){"use strict";var z=Object.defineProperty;var F=(o,c,f)=>c in o?z(o,c,{enumerable:!0,configurable:!0,writable:!0,value:f}):o[c]=f;var u=(o,c,f)=>(F(o,typeof c!="symbol"?c+"":c,f),f);function c(t=8){let s="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;let r=0;for(;r<t;)s+=e.charAt(Math.floor(Math.random()*n)),r+=1;return`v${s}`}function f(t){return t.split(/(?=[A-Z])/).join("-").toLowerCase()}function P(...t){return[...t]}window.h=P;function m(t,s){const e=t.$scopedId??c(),n=t[0],r=t[1],i=(()=>(delete t[0],delete t[1],[...t].filter(l=>!!l)))(),a=n.name?customElements.get(`v-${f(n.name)}`):null,h=a?new a:s.createElement(n);return h.props={},r&&Object.entries(r).forEach(([l,$])=>{if(l.startsWith("on")&&$ instanceof Function){if(l in h)h[l.toLowerCase()]=$;else{const I=l.substring(2);h.addEventListener(I,$)}return}h.props[S(l)]=$;try{h.setAttribute(l,$)}catch{}}),h.$scopedId=e,h.setAttribute(h.$scopedId,""),i.length&&i.forEach(l=>{if(["string","number"].includes(typeof l)||(l.$scopedId=h.$scopedId,"nodeName"in l||l instanceof HTMLElement))return h.append(l);h.appendChild(m(l,s))}),h}function S(t){return t.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(s,e){return e===0?s.toLowerCase():s.toUpperCase()}).replace("-","")}function E(){return t=>{t.prototype.renderTemplate=function(){var r,i,a;const s=(r=this.render)==null?void 0:r.call(this),e=document.createElement("style");let n=((i=this.styles)==null?void 0:i.call(this))??"";n!==""&&(n=n.trim().replaceAll(/(\S+)(h*.*\{)/gm,`$1[${this.$scopedId}]$2 `)),e.textContent=`${((a=this.globalStylesheet)==null?void 0:a.call(this))??""}${n}`,this.shadowRoot.appendChild(e),s&&(s.$scopedId=this.$scopedId,this.shadowRoot.appendChild(m(s,window.document)))}}}function p(t){const s=b(t)?[]:{};return g(s),A(s,t),R(s)}function A(t,s){Object.entries(s).forEach(([e,n])=>{if(n&&d(n)&&!("$$listeners"in n))t[e]=p(n);else if(b(n)){const r=n;if(r.length){const i=r[0];if(d(i)&&!("$$listeners"in i)){const a=r.map(h=>p(h));g(a),v(a),t[e]=a}else!d(i)&&!b(i)&&(t[e]=p(n))}else{const i=[];g(i),v(i),t[e]=i}}else t[e]=n})}function R(t){return v(t),new Proxy(t,{get:(s,e)=>s[e],set:(s,e,n)=>{const r=s[e];return!n.$$listeners&&d(n)&&(n=p(n),_(s[e],n)),s[e]=n,s.$$listeners[e]&&s.$$listeners[e].forEach(i=>{i(n,r,s)}),!0}})}function v(t){Object.defineProperty(t,"$on",{enumerable:!1,configurable:!1,writable:!1,value(s,e){this.$$listeners[s]||(this.$$listeners[s]=[]),this.$$listeners[s].push(e)}})}function _(t,s){d(t)&&(Object.entries(t.$$listeners).forEach(([e,n])=>{s.$$listeners[e]||(s.$$listeners[e]=[]),s.$$listeners[e]=[...n]}),Object.entries(t).forEach(([e])=>{t.$$listeners[e]&&t[e]!==s[e]&&t.$$listeners[e].forEach(n=>{n(s[e],t[e],s)}),_(t[e],s[e])}))}function d(t){return typeof t=="object"&&!Array.isArray(t)}function b(t){return typeof t=="object"&&Array.isArray(t)}function g(t){Object.defineProperty(t,"$$listeners",{enumerable:!1,configurable:!1,writable:!1,value:{}})}function O(){return t=>{t.prototype.buildProps=function(){this.props=p(this.props)}}}function C(){return t=>{t.prototype.buildState=function(){var s;this.data&&(this.state=p((s=this.data)==null?void 0:s.call(this)))}}}function w(t){return s=>{const e=t??f(s.name);customElements.get(`v-${e}`)||customElements.define(`v-${e}`,s)}}function y(){return t=>{t.prototype.emit=function(s,e){setTimeout(()=>{let n={bubbles:!0};e&&(n={...n},typeof e=="object"?n.detail={...e}:n.detail=e),this.dispatchEvent(new CustomEvent(s,n))},0)}}}var L=Object.defineProperty,B=Object.getOwnPropertyDescriptor,T=(t,s,e,n)=>{for(var r=n>1?void 0:n?B(s,e):s,i=t.length-1,a;i>=0;i--)(a=t[i])&&(r=(n?a(s,e,r):a(r))||r);return n&&r&&L(s,e,r),r};o.BaseView=class extends HTMLElement{constructor(){super();u(this,"refs");u(this,"$scopedId");this.attachShadow({mode:"open"}),this.$scopedId=c(),this.props={},this.state={},this.refs=new Proxy({},{get:(e,n)=>this.shadowRoot.querySelector(`[${this.$scopedId}][ref=${n}]`)})}setBindings(){}connectedCallback(){this.buildProps(),this.buildState(),this.renderTemplate(),this.setBindings()}removeAllChildren(){for(;this.shadowRoot.firstChild;)this.shadowRoot.removeChild(this.shadowRoot.lastChild)}update(){this.removeAllChildren(),this.renderTemplate()}},o.BaseView=T([E(),O(),C(),y()],o.BaseView);var D=Object.defineProperty,V=Object.getOwnPropertyDescriptor,W=(t,s,e,n)=>{for(var r=n>1?void 0:n?V(s,e):s,i=t.length-1,a;i>=0;i--)(a=t[i])&&(r=(n?a(s,e,r):a(r))||r);return n&&r&&D(s,e,r),r};history.pushState=(t=>function(){var e=t.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),e})(history.pushState),history.replaceState=(t=>function(){var e=t.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),e})(history.replaceState),window.addEventListener("popstate",()=>{window.dispatchEvent(new Event("locationchange"))}),window.$location=window.location,o.Route=class extends o.BaseView{constructor(){super();u(this,"props",{});u(this,"matchesRoute",!1);u(this,"location");this.location=window.$location}setBindings(){window.addEventListener("locationchange",()=>{this.checkPath()}),this.checkPath()}checkPath(){this.location.pathname===this.props.path||this.matchesPattern()?this.matchesRoute||(this.matchesRoute=!0,this.update()):this.matchesRoute&&(this.matchesRoute=!1,this.update())}matchesPattern(){if(!this.props.startWith&&!this.props.path)return!1;const e=this.location.pathname.split("/").filter(a=>a!=="");let n=this.props.startWith?this.props.startWith.split("/"):this.props.path.split("/");if(n=n.filter(a=>a!==""),this.props.path&&e.length!==n.length)return!1;if(this.props.path)return n.filter((a,h)=>a.startsWith(":")?!0:a===e[h]).length===e.length;const r=n.filter(a=>(a.startsWith(":"),!0));let i=0;for(;i<r.length;){if(r[i].startsWith(":")){i++;continue}if(r[i]!==e[i])return!1;i++}return!0}render(){return this.matchesRoute?["slot",{ref:"slot"}]:""}},o.Route=W([w()],o.Route);var M=Object.defineProperty,H=Object.getOwnPropertyDescriptor,J=(t,s,e,n)=>{for(var r=n>1?void 0:n?H(s,e):s,i=t.length-1,a;i>=0;i--)(a=t[i])&&(r=(n?a(s,e,r):a(r))||r);return n&&r&&M(s,e,r),r};o.If=class extends o.BaseView{constructor(){super(...arguments);u(this,"props")}setBindings(){this.props.$on("value",()=>{this.update()})}render(){return this.props.value?["slot",{ref:"slot"}]:""}},o.If=J([w()],o.If);var N=Object.defineProperty,Z=Object.getOwnPropertyDescriptor,q=(t,s,e,n)=>{for(var r=n>1?void 0:n?Z(s,e):s,i=t.length-1,a;i>=0;i--)(a=t[i])&&(r=(n?a(s,e,r):a(r))||r);return n&&r&&N(s,e,r),r};o.List=class extends o.BaseView{constructor(){super(...arguments);u(this,"props")}setBindings(){this.props.$on("value",()=>{this.update()})}render(){const e=this.props.value.map(n=>(console.log(this.props.item(n)),this.props.item(n)));return console.log(["div",{},...e]),e.length?["div",{},...e]:""}},o.List=q([w()],o.List),o.define=w,o.h=P,o.hasEmit=y,o.hasJsxTemplate=E,o.hasObservableProps=O,o.hasObservableState=C,o.observable=p,o.render=m,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
