(function(o,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(o=typeof globalThis<"u"?globalThis:o||self,c(o.vanille={}))})(this,function(o){"use strict";var N=Object.defineProperty;var Z=(o,c,f)=>c in o?N(o,c,{enumerable:!0,configurable:!0,writable:!0,value:f}):o[c]=f;var p=(o,c,f)=>(Z(o,typeof c!="symbol"?c+"":c,f),f);function c(e=8){let s="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length;let r=0;for(;r<e;)s+=t.charAt(Math.floor(Math.random()*n)),r+=1;return`v${s}`}function f(e){return e.split(/(?=[A-Z])/).join("-").toLowerCase()}function E(...e){return[...e]}window.h=E;function w(e,s){const t=e.$scopedId??c(),n=e[0],r=e[1],i=(()=>(delete e[0],delete e[1],[...e].filter(l=>!!l)))(),a=n.name?customElements.get(`v-${f(n.name)}`):null,h=a?new a:s.createElement(n);return r&&Object.entries(r).forEach(([l,$])=>{if(l.startsWith("on")&&$ instanceof Function){if(l in h)h[l.toLowerCase()]=$;else{const I=l.substring(2);h.addEventListener(I,$)}return}h.props={[S(l)]:$};try{h.setAttribute(l,$)}catch{}}),h.$scopedId=t,h.setAttribute(h.$scopedId,""),i.length&&i.forEach(l=>{if(["string","number"].includes(typeof l)||(l.$scopedId=h.$scopedId,"nodeName"in l||l instanceof HTMLElement))return h.append(l);h.appendChild(w(l,s))}),h}function S(e){return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(s,t){return t===0?s.toLowerCase():s.toUpperCase()}).replace("-","")}function P(){return e=>{e.prototype.renderTemplate=function(){var r,i,a;const s=(r=this.render)==null?void 0:r.call(this),t=document.createElement("style");let n=((i=this.styles)==null?void 0:i.call(this))??"";n!==""&&(n=n.trim().replaceAll(/(\S+)(h*.*\{)/gm,`$1[${this.$scopedId}]$2 `)),t.textContent=`${((a=this.globalStylesheet)==null?void 0:a.call(this))??""}${n}`,this.shadowRoot.appendChild(t),s&&(s.$scopedId=this.$scopedId,this.shadowRoot.appendChild(w(s,window.document)))}}}function u(e){const s=v(e)?[]:{};return b(s),A(s,e),R(s)}function A(e,s){Object.entries(s).forEach(([t,n])=>{if(n&&d(n)&&!("$$listeners"in n))e[t]=u(n);else if(v(n)){const r=n;if(r.length){const i=r[0];if(d(i)&&!("$$listeners"in i)){const a=r.map(h=>u(h));b(a),m(a),e[t]=a}else!d(i)&&!v(i)&&(e[t]=u(n))}else{const i=[];b(i),m(i),e[t]=i}}else e[t]=n})}function R(e){return m(e),new Proxy(e,{get:(s,t)=>s[t],set:(s,t,n)=>{const r=s[t];return!n.$$listeners&&d(n)&&(n=u(n),y(s[t],n)),s[t]=n,s.$$listeners[t]&&s.$$listeners[t].forEach(i=>{i(n,r,s)}),!0}})}function m(e){Object.defineProperty(e,"$on",{enumerable:!1,configurable:!1,writable:!1,value(s,t){this.$$listeners[s]||(this.$$listeners[s]=[]),this.$$listeners[s].push(t)}})}function y(e,s){d(e)&&(Object.entries(e.$$listeners).forEach(([t,n])=>{s.$$listeners[t]||(s.$$listeners[t]=[]),s.$$listeners[t]=[...n]}),Object.entries(e).forEach(([t])=>{e.$$listeners[t]&&e[t]!==s[t]&&e.$$listeners[t].forEach(n=>{n(s[t],e[t],s)}),y(e[t],s[t])}))}function d(e){return typeof e=="object"&&!Array.isArray(e)}function v(e){return typeof e=="object"&&Array.isArray(e)}function b(e){Object.defineProperty(e,"$$listeners",{enumerable:!1,configurable:!1,writable:!1,value:{}})}function C(){return e=>{e.prototype.buildProps=function(){this.props=u(this.props)}}}function O(){return e=>{e.prototype.buildState=function(){var s;this.data&&(this.state=u((s=this.data)==null?void 0:s.call(this)))}}}function g(e){return s=>{const t=e??f(s.name);customElements.get(`v-${t}`)||customElements.define(`v-${t}`,s)}}function _(){return e=>{e.prototype.emit=function(s,t){setTimeout(()=>{let n={bubbles:!0};t&&(n={...n},typeof t=="object"?n.detail={...t}:n.detail=t),this.dispatchEvent(new CustomEvent(s,n))},0)}}}var T=Object.defineProperty,B=Object.getOwnPropertyDescriptor,L=(e,s,t,n)=>{for(var r=n>1?void 0:n?B(s,t):s,i=e.length-1,a;i>=0;i--)(a=e[i])&&(r=(n?a(s,t,r):a(r))||r);return n&&r&&T(s,t,r),r};o.BaseView=class extends HTMLElement{constructor(){super();p(this,"refs");p(this,"$scopedId");this.attachShadow({mode:"open"}),this.$scopedId=c(),this.props={},this.state={},this.refs=new Proxy({},{get:(t,n)=>this.shadowRoot.querySelector(`[${this.$scopedId}][ref=${n}]`)})}setBindings(){}connectedCallback(){this.buildProps(),this.buildState(),this.renderTemplate(),this.setBindings()}removeAllChildren(){for(;this.shadowRoot.firstChild;)this.shadowRoot.removeChild(this.shadowRoot.lastChild)}update(){this.removeAllChildren(),this.renderTemplate()}},o.BaseView=L([P(),C(),O(),_()],o.BaseView);var D=Object.defineProperty,V=Object.getOwnPropertyDescriptor,W=(e,s,t,n)=>{for(var r=n>1?void 0:n?V(s,t):s,i=e.length-1,a;i>=0;i--)(a=e[i])&&(r=(n?a(s,t,r):a(r))||r);return n&&r&&D(s,t,r),r};history.pushState=(e=>function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),t})(history.pushState),history.replaceState=(e=>function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),t})(history.replaceState),window.addEventListener("popstate",()=>{window.dispatchEvent(new Event("locationchange"))}),window.$location=window.location,o.Route=class extends o.BaseView{constructor(){super();p(this,"props",{});p(this,"matchesRoute",!1);p(this,"location");this.location=window.$location}setBindings(){window.addEventListener("locationchange",()=>{this.checkPath()}),this.checkPath()}checkPath(){this.location.pathname===this.props.path||this.matchesPattern()?this.matchesRoute||(this.matchesRoute=!0,this.update()):this.matchesRoute&&(this.matchesRoute=!1,this.update())}matchesPattern(){if(!this.props.startWith&&!this.props.path)return!1;const t=this.location.pathname.split("/").filter(a=>a!=="");let n=this.props.startWith?this.props.startWith.split("/"):this.props.path.split("/");if(n=n.filter(a=>a!==""),this.props.path&&t.length!==n.length)return!1;if(this.props.path)return n.filter((a,h)=>a.startsWith(":")?!0:a===t[h]).length===t.length;const r=n.filter(a=>(a.startsWith(":"),!0));let i=0;for(;i<r.length;){if(r[i].startsWith(":")){i++;continue}if(r[i]!==t[i])return!1;i++}return!0}render(){return this.matchesRoute?["slot",{ref:"slot"}]:""}},o.Route=W([g()],o.Route);var M=Object.defineProperty,H=Object.getOwnPropertyDescriptor,J=(e,s,t,n)=>{for(var r=n>1?void 0:n?H(s,t):s,i=e.length-1,a;i>=0;i--)(a=e[i])&&(r=(n?a(s,t,r):a(r))||r);return n&&r&&M(s,t,r),r};o.If=class extends o.BaseView{constructor(){super(...arguments);p(this,"props")}setBindings(){this.props.$on("value",()=>{this.update()})}render(){return this.props.value?["slot",{ref:"slot"}]:""}},o.If=J([g()],o.If),o.define=g,o.h=E,o.hasEmit=_,o.hasJsxTemplate=P,o.hasObservableProps=C,o.hasObservableState=O,o.observable=u,o.render=w,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
